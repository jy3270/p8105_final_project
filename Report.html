<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Final Report</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Overview</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Exploratory Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="descriptive_statistics.html">Descriptive statistics</a>
    </li>
    <li>
      <a href="a_visualization.html">Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Statistical Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="statistical_tests.html">Statistical Test</a>
    </li>
    <li>
      <a href="regression_analysis.html">Regression Analysis</a>
    </li>
    <li>
      <a href="PCA_analysis.html">PCA Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://yixuanjiao.shinyapps.io/world-happiness-shinyapp/">Interactive Data Explore</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Report.html">Project Report</a>
</li>
<li>
  <a href="https://github.com/jy3270/world-happiness-analysis.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Final Report</h1>

</div>


<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>The World Happiness Report is a landmark survey of the state of
global happiness. In a generalized view, the progress of the nations
seems to somewhat affect the measurements of well-being, or the
happiness of the citizens. Therefore, the happiness indicator may serve
as a guide for the governments, organizations, and civil societies to
assess their policy-making decisions. The World Happiness Report reviews
the state of happiness in most of the countries across the years along
with other possible factors that would explain the variations in
happiness scores across countries and regions.</p>
<p>We are motivated to explore the possible relationship between the
variations in happiness and other possible factors such as geographical
region, GDP per capita, social support, freedom to make life choices,
healthy life expectancy, generosity, and perceptions of corruption.</p>
<p>How might these or some of these factors affect the state of
happiness in general? Based on different regions, are the differences in
each variable significant? What if taking the pandemic of Covid-19 into
account? We are interested to find out the answers to these questions
and draw conclusions on the importance of the factors that a nation
would focus on.</p>
</div>
<div id="background-and-related-work" class="section level2">
<h2>Background and related work</h2>
<p>We are inspired by the World Happiness Report 2021 and News article
World Happiness Report published to mark International Day of Happiness
about the importance of World Happiness on a social level by mentioning
people’s interactions during the pandemic. While diving into the
relationships between the possible variables and the Life Ladder Score,
we are aware of the influence of the pandemic on the World Happiness
report. We will use regression analysis and PCA/PCR analysis to find the
overall “best” model and address the association between the variables
and the Life Ladder Score. We will use statistical tests to address the
possible influence of the pandemic.</p>
</div>
<div id="research-questions" class="section level2">
<h2>Research questions</h2>
<ul>
<li><p>What is the ranking of the mean Life Ladder Score based on
different regions?</p></li>
<li><p>What are the trends of the distribution of each variable across
the years 2005 to 2021, based on different regions?</p></li>
<li><p>Are the mean Life Ladder Scores significantly different based on
regions?</p></li>
<li><p>Whether the mean Life Ladder Score of each region significantly
differs before and after the pandemic? If yes, whether the score before
is greater than the score after the pandemic?</p></li>
<li><p>Are the variables significantly different between “happy regions”
and “unhappy regions”?</p></li>
<li><p>Whether the distributions of the Life Ladder Score differ between
“happy regions” and “unhappy regions”?</p></li>
<li><p>What are the possible variables that could be used to predict the
Life Ladder Score in 2021?</p></li>
<li><p>How much does GDP associate with the Life Ladder Score?</p></li>
<li><p>Does any variable interact with GDP in the model and whether it
is significant?</p></li>
</ul>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p><a href="https://worldhappiness.report">World Happiness Report from
2005-2021</a></p>
<p>Variables of interest:</p>
<ul>
<li><code>country_name</code><br />
</li>
<li><code>regional_indicator</code>: region that the country belongs
to<br />
</li>
<li><code>ladder_score</code>: happiness index from 1 to 10 measured by
the national average response for Gallup World Poll (GWP)<br />
</li>
<li><code>logged_gdp_per_capita</code>: the country’s economic output
per person from World Development Indicators (WDI)<br />
</li>
<li><code>social_support</code>: the amount of assistance available from
other people measured by the national average response for GWP; ranges
from 0 to 1<br />
</li>
<li><code>healthy_life_expectancy</code>: healthy life expectancies at
birth based on data from the World Health Organization (WHO)<br />
</li>
<li><code>freedom_to_make_life_choices</code>: the amount of freedom to
choose what to do with one’s life measured by the national average
response for GWP, ranges from 0 to 1<br />
</li>
<li><code>generosity</code>: the willingness to make donation to
charities; measured by the national average response for GWP<br />
</li>
<li><code>perceptions_of_corruption</code>: the level of corruption in
the government and within business, measured by the national average
response for GWP; ranges from 0 to 1</li>
</ul>
</div>
<div id="methods" class="section level2">
<h2>Methods</h2>
<div id="data-processing-and-cleaning" class="section level3">
<h3>Data processing and cleaning</h3>
<ul>
<li><p>World Happiness Report pre 2021 <a
href="https://www.kaggle.com/datasets/ajaypalsinghlo/world-happiness-report-2021?resource=download&amp;select=world-happiness-report.csv">(dataset)</a><br />
The World Happiness Report pre 2021 contains 11 variables, describing
each country’s happiness score (Life Ladder Score) and its social,
economic, public health and other information that reflect the progress
of the nation.</p></li>
<li><p>World Happiness Report 2021 <a
href="https://www.kaggle.com/datasets/ajaypalsinghlo/world-happiness-report-2021?resource=download&amp;select=world-happiness-report-2021.csv">(dataset)</a><br />
The World Happiness Report 2021 contains 20 variables, describing each
country’s happiness score and information that reflect the progress of
the nation, along with some calculated statistics.</p></li>
<li><p>Combined World Happiness Report <a
href="https://github.com/jy3270/world-happiness-analysis.github.io/blob/main/Data/happiness.csv">(dataset)</a><br />
The 11 variables in World Happiness Report pre 2021 are reduced to 9 to
match the variables from the World Happiness Report 2021. The 20
variables in World Happiness Report 2021 are reduced to 10 with an
additional regional_indicator. We merged the two datasets by first
nesting the variables other than <code>country_names</code> in pre 2021
and variables other than <code>country_names</code> and
<code>regional_indicator</code> in 2021 and then using
<code>left_join()</code>. We combined the nested variables from two
datasets with <code>map2()</code> and <code>bind_rows()</code>. Finally,
unnested the variables and dropped na’s. The resulting dataset was
exported.</p></li>
</ul>
</div>
<div id="exploratory-analysis" class="section level3">
<h3>Exploratory analysis</h3>
<p>For our exploratory analysis, we wanted to first analyze the main
characteristics of each variable to examine the reliability of our later
tests and regression. We found out that out of the total 1816
observations, only 49 observations belong to East Asia, and only 1
observation is from 2005. Furthermore, there are six countries (China,
Hong Kong, Kosovo, Maldives, North Cyprus, Turkmenistan) that only have
one observation. Therefore, the statistical tests and regression results
might not apply for these countries/regions/years.</p>
<p>Looking at the distribution of each continuous variable, ladder
score, logged gdp per capita, generosity are all symmetrically
distributed, with mean at 5.47, 9.35, and -0.003 respectively. Social
support, healthy life expectancy, freedom to make life choices, and
perceptions of corruption are all skewed right, with median at 0.84,
65.3, 0.77, and 0.80 respectively. The skewness may suggest some
transformation, for instance log transformation. Summary tables are also
made to show the descriptive statistics of each variable. The first
table combined all the observations and calculated the mean and standard
deviation for each variable. The second table is separated by regional
indicator, and the third table is separated by year.</p>
<p>In order to discover trends and patterns in our dataset, we also
created several visualizations of the variables. To investigate life
ladder score, we first plotted a bar plot that represents the mean life
ladder score from 2005 to 2021 for different regions. From the plot, we
found that North America and ANZ has the highest mean life ladder score,
while Sub-Saharan Africa has the lowest. Additionally, we plotted box
plots to show the distribution of ladder score for each region from 2006
to 2021. Note that 2005 was excluded from the plot because it only has
one observation. The box plots show relatively stable distributions of
life ladder score for North American and ANZ and Western Europe across
years. Interestingly they are also the two regions with the highest mean
life ladder score. We also plotted the mean life ladder score for the
top 50 countries. These countries have mean life ladder scores ranging
from around 6 to 7.5. Western Europe has the highest proportion among
the top 50 countries.</p>
<p>Box plots were also made to show the distribution of all other
variables for different regions across years. North American and ANZ and
Western Europe are the two regions with highest logged GDP per capita,
social support, healthy life expectancy, and freedom to make life
choices, which suggest that these variables may have positive
correlation with life ladder score. North American and ANZ and Western
Europe are also the two regions with lowest perception of corruption,
suggesting that it might be inversely correlated with life ladder score.
Overall, logged GDP per capita and healthy life expectancy indicate
increasing trends across years for all regions.</p>
<p>Lastly, we made interactive maps to show the mean value of each
variable across years for each country, where a darker color indicates
higher value. For life ladder score, Canada, Australia, and Western
European countries have noticeably high values. This trend is found
similarly for logged GDP per capita, social support, healthy life
expectancy, and freedom to make life choices. The opposite trend is
found for perceptions of corruption (i.e. Canada, Australia, and Western
European countries have noticeably low value for perceptions of
corruption). These findings align with the findings from box plots and
suggest that these variables might be strongly correlated with life
ladder score.</p>
</div>
<div id="statistical-tests" class="section level3">
<h3>Statistical tests</h3>
<p>Statistical Tests are conducted to discover the differences of the
ladder score between each region, the impact that Covid-19 might have on
the ladder score, and the differences of ladder score and each variable
in regions that have relatively high ladder scores and regions that have
relatively low ladder scores.</p>
<p>To investigate the variabilities of the ladder scores between
different regions, we conduct an anova test for the population mean of
the ladder scores in each region. We compute an One-way ANOVA test to
determine whether the mean population ladder score is the same for all
the eight regions in our data. To conduct the test, we nested the data
based on region, and computed the sample mean of the ladder score for
each region. The hypothesis for the test are:</p>
<p>H0: The population mean of the ladder score is the same for all the
10 regions. Ha: At least one population mean of the ladder score is
different. <em>ADD R CODE results</em></p>
<p>In this test, we get a p-value that is very close to zero, which
indicates that the ladder score is the same for all the countries. Thus,
we can conclude that at least one population mean ladder score of the 10
regions are different. This result agrees with our visualization of the
estimates and the confidence intervals of the ladder score in the 10
regions.</p>
<p>Moreover, we are interested in whether the population mean of ladder
score changes due to the Covid-19 pandemic. We divided the data into 2
groups: “before covid” and “after covid” based on what year the data is
in. If the observation is before 2019, we classify it in the “before
covid” group, and if the observation is after or in 2019, we classify it
in the “after covid” group. Than we compute a two sample t-test with
equal variances after checking the variances of these two groups. In
this case, we unexpectedly found out that the mean population ladder
score during covid is actually higher than the mean population ladder
score before covid. The hypothesis for this test are:</p>
<p>H0: the population mean of ladder score is the same for the time
period before covid-19 and the time period after covid-19 for all
countries. Ha: the population mean of ladder score is the smaller for
the time period before covid-19 and the time period after covid-19 for
all countries. <em>ADD R CODE results</em></p>
<p>The p value in this case is very small, thus we have strong evidence
to say that the population mean of the ladder score after covid-19 is
higher than the happiness score before covid-19. This might be due to
the work from home working mode allowing people to spend more time with
people they loved, development of technology and life quality with time
that is not related to covid, or any other factors. However, the sample
size of the after covid data is much smaller than the sample size of
before covid data, this may also cause bias in our analysis. We then
stratified our analysis on the 10 regions: for each region, whether
covid causes change in the population mean of the ladder score, the
results found out that for region: Central and Eastern Europe,
Commonwealth of Independent States, and Sub-Saharan Africa, the
population mean ladder score increased after covid, while for the region
North America and ANZ the population mean ladder score decreased after
covid.</p>
<p>We are also interested in Whether the regions that have high
happiness scores throughout 2008-2021 differ in properties than the
countries that have relatively low happiness scores throughout
2008-2022. We divide all the 10 regions into two groups “happy regions”
and “unhappy regions” based on previous analysis on the estimates and
the confidence intervals of the ladder scores. We are going to conduct
two sample t-tests on the happy region group and the unhappy region
group on each variable, and find out whether those regions have
differences in logged gdp per capita, social support, healthy life
expectancy, freedom to make life choices, and perceptions of corruption.
For each variable the hypothesis are:</p>
<p>H0: the population mean of the variable value is the same for the
happy regions and the Ha: the population mean of the variable value is
different, greater or less for the happy regions than the unhappy
regions.</p>
<p>After conducting five two sample t tests, we find out that for all
the tests except for the generosity value, the p-value is lower than
0.005, so we conclude that our 2 sample t tests show strong evidences
that the factors include in the data differ a lot for happy regions and
unhappy regions, except for the generosity index.</p>
<p>Finally, we want to see whether the distribution of the ladder score
is different in the happy regions and the unhappy regions by conducting
a permutation test. In the permutation test, we assign a label (“0” or
“1” to the observation belonging to the happy regions and the
observation belonging to the unhappy regions). The label itself is
independent of the ladder score we are testing on, and we shuffle the
labels to replicate our process of getting the test statistic. For
simplicity, we choose our test statistic to be the difference of the
ladder score of happy regions and unhappy regions. We shuffle the label
of our observation data, compute the test statistic over 1000 times and
look at their distributions. In this case, our hypothesis are:</p>
<p>H0: the distribution of the ladder score is the same for the happy
regions and the unhappy regions. Ha: the distribution of the ladder
score for the happy region is different from the distribution of the
ladder score in the unhappy regions. <em>Show the distribution
plot</em></p>
<p>From the plot, we see that the most observed mean difference of
ladder score between the happy and unhappy region is about -2.95. To
compute the p value, we compute the probability that we observe a value
on the mean difference distribution that is more extreme (smaller or
bigger) than the observed mean differences (-2.24) in the mean
difference of ladder score between the happy regions and the unhappy
regions, and we get a p value of zero. This indicates that the
distribution of the ladder score is different for the happy regions and
the unhappy regions.</p>
</div>
<div id="regression-analysis" class="section level3">
<h3>Regression analysis</h3>
<p>After exploring and understanding the data using EDA and statistical
tests, we moved to hypothesize and understand what factors in our data
might have potential influence on the happy score. Here we mainly focus
on the data collected from 2021 and we also transformed the original
happiness score into rank to have a better understanding on the
difference of happiness score among countries.</p>
<p>We firstly developed a full model that includes all the predictors
and a model with only the intercept as baselines. Then we chose to use
North America and ANZ as a reference group for comparison, and used
stepwise regression procedure to find the model with the minimum Akaike
Information Criteria(AIC), which is an estimator of prediction error and
thereby relative quality of statistical models for a given set of data.
In estimating the amount of information lost by a model, AIC deals with
the trade-off between the goodness of fit of the model and the
simplicity of the model. In other words, AIC deals with both the risk of
overfitting and the risk of underfitting. As a result, we picked the
model with the lowest AIC, which includes Region, GDP, Social.support,
Freedom and Corruption. After plotting the residuals of the model, we
tried to find if there should be interaction terms.</p>
<p>According to graphs about the relationships between predictors, It
seemed like GDP and Freedom might have some interaction. We added the
interaction term and it turned out that the slope of Freedom changes for
every one increase in GDP, and as GDP increases, the slope of freedom
decreases.</p>
<p>Looking at the p-value, the value of both GDP and Freedom indicate
they’re insignificant(p-value &gt; 0.05) after we added the interaction
term, but the interaction effect is significant now. At the same time,
the p-value for Corruption indicates it’s insignificant in our new
model. We also remade the distribution plots about the residuals.</p>
</div>
<div id="pcapcr-analysis" class="section level3">
<h3>PCA/PCR analysis</h3>
<p>Instead of using linear regression on the model, we want to see
whether other models can help us predict the happiness score. In this
case, we adapt principal component analysis to see the similarities
between observations and correlation between predictors, and utilize
principal component regression to predict the ladder score at 2021. We
will also compare our pcr model with our regression model to see which
one performs the best.</p>
<p>In the PCA analysis process, we also randomly select 75% of the
dataset as our training set, and the rest 25% of the dataset as our
testing set. Here we are scaling all the variables (logged gdp per
capita, social support, healthy life expectancy, freedom to make life
choices, and perceptions of corruption) since they have different units
in this scenario. The result of PCA analysis is shown below, the linear
combination of each component can also be referred from the table
below.</p>
<p><em>Show result</em></p>
<p>We see that the first component explains about 54.4% of the variances
in the data, the second component explains about 21.5% of the variances
in the data, and the third explains about 10.17%. The three components
will cumulatively explain about 86.03% of the variances in the data,
which is relatively sufficient in this case. The results below show the
results of each component.</p>
<p>*Show result of rotation and biplot”</p>
<p>The data points closer to each other in the above biplot have a
similar data pattern. When we group all the observations on the plot
based on regions, we see the observations from the same region are
relatively closer to each other, which means that they are similar in
the pattern of the predictors. Furthermore, we can see that the
predictors social support, healthy life expectancy, and logged gdp per
capita are highly positively correlated with each other (shown on the
plot, their vectors form very small angles with each other). The
predictor freedom to make life choices is also relatively correlated
with social support, healthy life expectation and logged gdp per capita.
This might be a concern when we build our regression model.</p>
<p>We also implemented a PCR regression model to predict the ladder
score in 2021. From the output below, we see that cross validation error
RMSEP is lowest when we include 1 component in our data. <em>Show result
and validation plot</em></p>
<p>When we look at the plot, we also see that when we add one principal
component, the test error will be the lowest. As a result, we use one
principle component in the PCR model to make predictions on the out of
sample observations. We compute the test mse for the PCR model by taking
the prediction of the PCR model on the test set’s ladder score, subtract
the observed values of the ladder score and taking the mean square of
them, then repeat the same process for the training data. We get a test
MSE value of 0.47, and a train mse of 0.227. What’s more, we want to
compare the performance of the PCR regression to the best regression
model we’ve obtained in the regression analysis. In this case the test
MSE value of the selected best regression model is around 0.38, and the
train MSE value of the regression model is 0.18. Thus, in this case, the
regression model outperforms the PRC model.</p>
</div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<div id="findings-and-summary" class="section level3">
<h3>Findings and summary</h3>
<p>To answer our research questions:</p>
<ul>
<li><p>The ranking of the mean life ladder score from lowest to highest
region is Sub Saharan Africa, South Asia, Commonwealth of Independent
States, Middle East and North Africa, Southeast Asia, Central and
Eastern Europe, East Asia, Latin America and Caribbean, Western Europe,
North America and ANZ.</p></li>
<li><p>From the One Way ANOVA test, we found that at least one region
has a mean ladder score different from others.</p></li>
<li><p>By conducting two sample t-tests, we found that in Central and
Eastern Europe, Commonwealth of Independent States and Sub-Saharan
Africa, mean ladder scores increased after covid. In North America and
ANZ, mean ladder score decreased after covid. In all other regions, mean
ladder scores stayed the same before and after covid.</p></li>
<li><p>Comparing regions with relatively high ladder scores (“happy
regions”) with regions with low ladder scores (“unhappy regions”), we
conclude that “happy regions” have higher logged GDP per capita, social
support, healthy life expectancy, freedom to make life choices. “Happy
regions” also have different perceptions of corruption than “unhappy
regions”, though the mean generosity is the same between the two types
of regions.</p></li>
<li><p>Permutation test suggests that the distribution of ladder scores
for “happy regions” and “unhappy regions” are different.</p></li>
<li><p>Regional indicators, logged GDP per capita, social support, and
freedom to make life choices have strong relationships with and can be
used to predict life ladder scores. Although GDP is a strong predictor
for ladder score, there is strong interaction between GDP and freedom to
make life choices, meaning that the effect of GDP on ladder score
depends on the value of freedom to make life choices.</p></li>
<li><p>According to regression analysis, the correlations between GDP
and Ladder Score seemed to be very strong, and the initial regression
model(including Region, GDP, Social.support, Freedom and Corruption as
predictor) would suggest that GDP is a powerful predictor of the
Happiness Ladder Score, but after adapting interaction term and refit
model, we found that the relationship between Freedom and GDP couldn’t
be ignored: these two seemed to influence each other and we couldn’t
eliminate either of them.</p></li>
<li><p>Comparing the PCR and the regression models based on MSE, we
conclude that the regression model is the best model.</p></li>
</ul>
</div>
<div id="limitations" class="section level3">
<h3>Limitations</h3>
<p>The dataset has very few observations for China, Hong Kong, Kosovo,
Maldives, North Cyprus, Turkmenistan and for 2005, which prevented us
from gaining meaningful insights about the life ladder score for these
countries and year. There are also a few countries in Africa that have
no observation at all, finding data about their happiness index could
give us a more comprehensive image for our project. Furthermore, aside
from the variables investigated in this project, there are many other
factors that can influence happiness, such as schooling, health care,
quality of medical treatment, etc. Including these extra variables in
our model can possibly improve our prediction about life ladder
score.</p>
</div>
<div id="next-steps" class="section level3">
<h3>Next steps</h3>
<p>If we are able to find datasets related to COVID-19 on the variables
we used, we could explore how the pandemic affected these variables such
as GDP, healthy life expectancy, social support, freedom to make life
choices, and generosity as well as how they work together to have
influence on the state of happiness. Since the pandemic might serve as a
confounder or have interactions with other variables, we think that by
including the data related to COVID-19, a better model could be built to
predict future Life Ladder Score. We also believe that by addressing the
possible effects of COVID-19 on global happiness and other variables,
the government and organizations would be able to make better
decisions.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
